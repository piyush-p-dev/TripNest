<% layout("/layouts/boilerplate") %>

<div class="booking-page">
  <h2 class="mb-4">Book: <%= listing.title %></h2>

  <form
    action="/bookings/<%= listing._id %>/pay"
    method="POST"
    class="booking-box"
  >
    <h4>₹<%= listing.price %> <small class="text-muted">per night</small></h4>

    <div class="mb-3">
      <label for="checkIn" class="form-label">Check-In</label>
      <input
        type="text"
        class="form-control"
        id="checkIn"
        name="booking[checkIn]"
        required
      />
    </div>

    <div class="mb-3">
      <label for="checkOut" class="form-label">Check-Out</label>
      <input
        type="text"
        class="form-control"
        id="checkOut"
        name="booking[checkOut]"
        required
      />
    </div>

    <div class="mb-3">
      <label for="guests" class="form-label">Guests</label>
      <input
        type="number"
        class="form-control"
        id="guests"
        name="booking[guests]"
        min="1"
        required
      />
    </div>

    <div class="price-breakdown">
      <p><span id="nightCount">0</span> nights × ₹<%= listing.price %></p>
      <p>GST (18%): ₹<span id="gstAmount">0.00</span></p>
      <p class="total-row">Total: ₹<span id="totalPrice">0.00</span></p>
      <p class="text-muted mt-2">You won’t be charged yet</p>
    </div>

    <button
      type="submit"
      class="btn w-100 text-white mt-3"
      style="background-color: #fe424d"
    >
      <i class="fa-solid fa-calendar-check me-2"></i>Reserve
    </button>
  </form>
</div>

<script>
  window.pricePerNight = <%= listing.price %>;
</script>
